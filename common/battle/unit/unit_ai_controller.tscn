[gd_scene load_steps=16 format=3 uid="uid://bmbpmw618ddnf"]

[ext_resource type="Script" path="res://common/battle/unit/unit_ai_controller.gd" id="1_vqycx"]
[ext_resource type="Script" path="res://common/behaviour_tree/behaviour_tree.gd" id="2_fevwe"]
[ext_resource type="Script" path="res://common/behaviour_tree/bt_sequence.gd" id="3_4wvrg"]
[ext_resource type="Script" path="res://common/behaviour_tree/bt_selector.gd" id="4_5kw74"]
[ext_resource type="Script" path="res://common/battle/unit/behaviour/has_instructions.gd" id="4_saurn"]
[ext_resource type="Script" path="res://common/behaviour_tree/bt_decorator_invert.gd" id="5_ijaqp"]
[ext_resource type="Script" path="res://common/battle/formation/target_position_changed.gd" id="6_p0mug"]
[ext_resource type="Script" path="res://common/behaviour_tree/bt_decorator_always_fail.gd" id="7_oydd7"]
[ext_resource type="Script" path="res://common/battle/unit/behaviour/has_formation_target.gd" id="8_aba3r"]
[ext_resource type="Script" path="res://common/battle/unit/behaviour/has_unit_target.gd" id="9_kivj5"]
[ext_resource type="Script" path="res://common/battle/unit/behaviour/pick_closest_unit.gd" id="10_81tn4"]
[ext_resource type="Script" path="res://common/battle/unit/behaviour/set_movement_target.gd" id="11_4maul"]
[ext_resource type="Script" path="res://common/battle/unit/behaviour/in_range_of_target.gd" id="12_j72g1"]
[ext_resource type="Script" path="res://common/battle/unit/behaviour/goto_target.gd" id="13_7p1ay"]
[ext_resource type="Script" path="res://common/battle/unit/behaviour/perform_action.gd" id="14_jbbgs"]

[node name="Controller" type="Node3D"]
script = ExtResource("1_vqycx")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]

[node name="BehaviourTree" type="Node" parent="."]
script = ExtResource("2_fevwe")

[node name="Sequence" type="Node" parent="BehaviourTree"]
script = ExtResource("3_4wvrg")

[node name="HasInstructions" type="Node" parent="BehaviourTree/Sequence"]
script = ExtResource("4_saurn")

[node name="Selector" type="Node" parent="BehaviourTree/Sequence"]
script = ExtResource("4_5kw74")

[node name="Invert" type="Node" parent="BehaviourTree/Sequence/Selector"]
script = ExtResource("5_ijaqp")

[node name="HasTargetPositionChanged" type="Node" parent="BehaviourTree/Sequence/Selector/Invert"]
script = ExtResource("6_p0mug")
distance_threshold = 5.0

[node name="AlwaysFail" type="Node" parent="BehaviourTree/Sequence/Selector"]
script = ExtResource("7_oydd7")

[node name="Sequence" type="Node" parent="BehaviourTree/Sequence/Selector/AlwaysFail"]
script = ExtResource("3_4wvrg")

[node name="HasFormationTarget" type="Node" parent="BehaviourTree/Sequence/Selector/AlwaysFail/Sequence"]
script = ExtResource("8_aba3r")

[node name="Invert" type="Node" parent="BehaviourTree/Sequence/Selector/AlwaysFail/Sequence"]
script = ExtResource("5_ijaqp")

[node name="HasTargetUnit" type="Node" parent="BehaviourTree/Sequence/Selector/AlwaysFail/Sequence/Invert"]
script = ExtResource("9_kivj5")

[node name="PickClosestUnit" type="Node" parent="BehaviourTree/Sequence/Selector/AlwaysFail/Sequence"]
script = ExtResource("10_81tn4")

[node name="SetMovementTarget" type="Node" parent="BehaviourTree/Sequence/Selector"]
script = ExtResource("11_4maul")

[node name="Sequence" type="Node" parent="BehaviourTree/Sequence"]
script = ExtResource("3_4wvrg")

[node name="Selector" type="Node" parent="BehaviourTree/Sequence/Sequence"]
script = ExtResource("4_5kw74")

[node name="InRangeOfTarget" type="Node" parent="BehaviourTree/Sequence/Sequence/Selector"]
script = ExtResource("12_j72g1")

[node name="GotoTarget" type="Node" parent="BehaviourTree/Sequence/Sequence/Selector"]
script = ExtResource("13_7p1ay")

[node name="HasFormationTarget" type="Node" parent="BehaviourTree/Sequence/Sequence"]
script = ExtResource("8_aba3r")

[node name="PerformAction" type="Node" parent="BehaviourTree/Sequence/Sequence"]
script = ExtResource("14_jbbgs")
